<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p" xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">


    <bean id="duke"
          class="com.filippov.rm.common.Juggler">
        <constructor-arg value="6"/>
    </bean>

    <bean id="sonnet29"
          class="com.filippov.rm.common.Sonnet29">
    </bean>

    <bean id="duke2"
          class="com.filippov.rm.common.PoeticJuggler">
        <constructor-arg value="15"/>
        <constructor-arg ref="sonnet29"/>
    </bean>

    <bean id="stage"
          class="com.filippov.rm.common.Stage"
          factory-method="getInstance"/>

    <bean id="test"
          class="com.filippov.rm.common.Test"
          factory-method="getInstance"/>

    <!--<bean id="test2"-->
    <!--class="com.filippov.rm.common.Test"-->
    <!--factory-method="getInstance"/>-->

    <bean id="duditorium"
          class="com.filippov.rm.common.Auditorium"/>


    <bean id="kenny"
          class="com.filippov.rm.common.Instrumentalist">
        <property name="song" value="Znaish li ty"/>
        <property name="instrument" >
            <bean class="com.filippov.rm.common.Saxophone"/>
        </property>
    </bean>

    <bean id="kenny2"
          class="com.filippov.rm.common.Instrumentalist"
    p:song="Kakay nezhnost"
    p:instrument-ref="saxophone"/>

    <bean id="Henry"
          class="com.filippov.rm.common.OneManBand">
        <property name="instruments">
            <set>
                <ref bean="guitar"/>
                <ref bean="guitar"/>
                <ref bean="piano"/>
                <ref bean="saxophone"/>
            </set>
        </property>
    </bean>

    <bean id ="copySong"
          class="com.filippov.rm.common.CopySong">
        <property name="song" value="#{kenny2.song.toUpperCase() + '  oooo  ' +T(java.lang.Math).PI}"/>
    </bean>
    <bean id="saxophone"
          class="com.filippov.rm.common.Saxophone"/>

    <bean id="piano"
          class="com.filippov.rm.common.Piano"/>

    <bean id="guitar"
          class="com.filippov.rm.common.Guitar"/>


    <bean id="cities"
          class="com.filippov.rm.common.world.Cities">
        <property name="citiesList" ref="citiesList"/>
        <property name="specialCity" value="#{citiesList.^[population ge 6000000]}"/>
        <property name="bigCities" value="#{citiesList.?[population ge 6000000]}"/>
    </bean>

    <util:list id="citiesList">
        <bean class="com.filippov.rm.common.world.City"
              p:country="Russia"
              p:name="SPb"
              p:population="6000000"/>
        <bean class="com.filippov.rm.common.world.City"
              p:country="Russia"
              p:name="Moscow"
              p:population="12000000"/>
        <bean class="com.filippov.rm.common.world.City"
              p:country="Russia"
              p:name="Sosnovy-Bor"
              p:population="60000"/>
        <bean class="com.filippov.rm.common.world.City"
              p:country="Russia"
              p:name="Vyborg"
              p:population="60000"/>
    </util:list>

</beans>